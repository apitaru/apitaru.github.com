<!DOCTYPE html>
<html lang="">

<head>
	<title>Our Tune</title>
	<meta charset="utf-8" />
	<meta name="description" content="A love song from an engine that has never heard one. 
Each tune tells a four part story of two people's time together and sometimes apart.
Do not expect sweetness, though it may happen. License: CC BY-NC 4.0">
	<meta name="author" content="Pitaru">
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link type="text/css" rel="stylesheet" href="./style.css" />

	<script id="fxhash-snippet">
		//---- do not edit the following code (you can indent as you wish)
  let alphabet = "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
  var fxhash = "oo" + Array(49).fill(0).map(_=>alphabet[(Math.random()*alphabet.length)|0]).join('')
  let b58dec = str=>[...str].reduce((p,c)=>p*alphabet.length+alphabet.indexOf(c)|0, 0)
  let fxhashTrunc = fxhash.slice(2)
  let regex = new RegExp(".{" + ((fxhashTrunc.length/4)|0) + "}", 'g')
  let hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
  let sfc32 = (a, b, c, d) => {
    return () => {
      a |= 0; b |= 0; c |= 0; d |= 0
      var t = (a + b | 0) + d | 0
      d = d + 1 | 0
      a = b ^ b >>> 9
      b = c + (c << 3) | 0
      c = c << 21 | c >>> 11
      c = c + t | 0
      return (t >>> 0) / 4294967296
    }
  }
  var fxrand = sfc32(...hashes)
  // true if preview mode active, false otherwise
  // you can append preview=1 to the URL to simulate preview active
  var isFxpreview = new URLSearchParams(window.location.search).get('preview') === "1"
  // call this method to trigger the preview
  function fxpreview() {
    console.log("fxhash: TRIGGER PREVIEW")
  }
  //---- /do not edit the following code


    /*
		//---- do not edit the following code (you can indent as you wish)
      let alphabet = "123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"
      var fxhash = "oo" + Array(49).fill(0).map(_=>alphabet[(Math.random()*alphabet.length)|0]).join('')
      let b58dec = (str) => str.split('').reduce((p,c,i) => p + alphabet.indexOf(c) * (Math.pow(alphabet.length, str.length-i-1)), 0)
      let fxhashTrunc = fxhash.slice(2)
      let regex = new RegExp(".{" + ((fxhash.length/4)|0) + "}", 'g')
      let hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
      let sfc32 = (a, b, c, d) => {
        return () => {
          a |= 0; b |= 0; c |= 0; d |= 0
          var t = (a + b | 0) + d | 0
          d = d + 1 | 0
          a = b ^ b >>> 9
          b = c + (c << 3) | 0
          c = c << 21 | c >>> 11
          c = c + t | 0
          return (t >>> 0) / 4294967296
        }
      }
      var fxrand = sfc32(...hashes)
      */
      //---- /do not edit the following code
      

      function bootFXHash(hash) {
        fxhash = hash

        b58dec = str=>[...str].reduce((p,c)=>p*alphabet.length+alphabet.indexOf(c)|0, 0)
        fxhashTrunc = fxhash.slice(2)
        regex = new RegExp(".{" + ((fxhashTrunc.length/4)|0) + "}", 'g')
        hashes = fxhashTrunc.match(regex).map(h => b58dec(h))
        sfc32 = (a, b, c, d) => {
          return () => {
            a |= 0; b |= 0; c |= 0; d |= 0
            var t = (a + b | 0) + d | 0
            d = d + 1 | 0
            a = b ^ b >>> 9
            b = c + (c << 3) | 0
            c = c << 21 | c >>> 11
            c = c + t | 0
            return (t >>> 0) / 4294967296
          }
        }
        fxrand = sfc32(...hashes)
      }
	</script>
  
  <script src="https://unpkg.com/@airgap/beacon-sdk@2.3.9/dist/walletbeacon.min.js" integrity="sha384-qmlJoOjIzO/W50x5NQfLoWd8+KZz849XPXME8fGj3XvPdj2ME5ZnTWUQ0Lhd2Mmb" crossorigin="anonymous"></script>
	<script src="./p5/p5.min.js">
	</script>
	<script src="./p5/addons/p5.sound.js">
	</script>

</head>

<body>
	<main>
        <div id="app-holder"></div>
		<div id="app-viz-holder"></div>
  <script src="./app.js"></script>
	</main>
</body>

</html>